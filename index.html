<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <meta name="description"
        content="Jouez Ã  Flappy Savon et tentez de gagner des savons artisanaux Savon Yvard ! Entrez dans le Top 3 du concours." />
    <meta name="theme-color" content="#f5f0e8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta property="og:title" content="Flappy Savon â€“ Concours Savon Yvard" />
    <meta property="og:description" content="Jouez et gagnez des savons artisanaux !" />
    <meta property="og:type" content="website" />
    <title>Flappy Savon â€“ Concours Savon Yvard</title>
    <link rel="stylesheet" href="css/styles.css" />
</head>

<body>
    <div class="wrap">
        <canvas id="game" width="420" height="700" role="img"
            aria-label="Jeu Flappy Savon â€“ Utilisez Espace ou cliquez pour sauter"></canvas>

        <!-- Top Bar: Score + Menu -->
        <div class="top-bar">
            <div class="score-display">
                <span class="current-score" id="score">0</span>
                <span class="best-score">ğŸ† <span id="best">0</span></span>
            </div>
            <button id="menuBtn" class="menu-btn" aria-label="Menu">â˜°</button>
        </div>

        <!-- Bottom: Replay Button -->
        <div class="bottom-bar">
            <button id="restart" class="replay-btn">
                <span class="play-icon">â–¶</span>
                <span>Rejouer</span>
            </button>
        </div>

        <!-- Contest Info (shown after game over) -->
        <div class="contest" id="contest">
            <span>ğŸ¯ Top 3</span>
            <span class="separator">â€¢</span>
            <span id="countdown">31j restants</span>
        </div>
    </div>

    <!-- Menu Drawer -->
    <div id="menuDrawer" class="menu-drawer">
        <div class="drawer-header">
            <h3>Menu</h3>
            <button id="menuClose" class="close-btn">âœ•</button>
        </div>
        <div class="drawer-content">
            <button id="leaderBtn" class="drawer-item">
                <span class="item-icon">ğŸ†</span>
                <span>Classement</span>
            </button>
            <button id="idBtn" class="drawer-item">
                <span class="item-icon">ğŸ‘¤</span>
                <span>Mon compte</span>
            </button>
            <button id="skinBtn" class="drawer-item">
                <span class="item-icon">ğŸ¨</span>
                <span>Skins</span>
            </button>
            <button id="shareBtn" class="drawer-item">
                <span class="item-icon">ğŸ“¤</span>
                <span>Partager</span>
            </button>
            <button id="muteBtn" class="drawer-item">
                <span class="item-icon">ğŸ”ˆ</span>
                <span>Son</span>
            </button>
        </div>
    </div>
    <div id="menuOverlay" class="menu-overlay"></div>

    <!-- Rank Bubbles -->
    <div id="rank" class="rank">Rang â€”</div>
    <div id="rankLive" class="rank" style="display:none">Rang â€”</div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <!-- Guest Reminder -->
    <div id="reminder" class="reminder">
        <span>ğŸ† Inscris-toi pour figer ton score au classement !</span>
        <button id="reminderBtn" class="btn">S'inscrire</button>
    </div>

    <!-- Identity / Onboarding Modal -->
    <div id="idModal" class="modal" aria-hidden="true">
        <div class="card">
            <button id="idClose" class="close-btn" aria-label="Fermer">âœ•</button>
            <h2>ğŸ® Flappy Savon</h2>
            <p class="subtitle">Concours jusqu'au <strong>31 janvier</strong> â€¢ Entre dans le Top 3 !</p>

            <div class="benefits">
                <span>ğŸ† Classement</span>
                <span>ğŸ Lots Ã  gagner</span>
                <span>ğŸŸï¸ Code promo</span>
            </div>

            <div class="row">
                <input id="pseudo" type="text" placeholder="Ton pseudo" maxlength="24" autocomplete="nickname" />
            </div>
            <div class="row">
                <input id="email" type="email" placeholder="Ton e-mail" autocomplete="email" />
                <p class="email-hint">ğŸ“¬ Tes rÃ©compenses seront envoyÃ©es ici</p>
            </div>
            <div class="row inline">
                <input id="optin" type="checkbox" />
                <label for="optin">J'accepte les e-mails Savon Yvard</label>
            </div>
            <button id="idSave" class="btn full">Participer</button>
            <button id="idSkip" class="skip-link">Jouer sans participer â†’</button>
            <p class="legal"><a href="https://savon-yvard.fr/politique-de-confidentialite/" target="_blank">Politique de
                    confidentialitÃ©</a></p>
        </div>
    </div>

    <!-- Skins Modal -->
    <div id="skinModal" class="modal" aria-hidden="true">
        <div class="card">
            <h2>Choisis ton savon</h2>
            <p class="muted">Skins inspirÃ©s de ta gamme (couleurs indicatives).</p>
            <div class="skins" id="skins"></div>
            <div class="actions">
                <button id="skinClose" class="btn">Fermer</button>
            </div>
        </div>
    </div>

    <!-- Leaderboard -->
    <div id="leader" class="leader">
        <h3>ğŸ† Top 10 (concours)</h3>
        <div id="leaderRows"></div>
        <div class="muted" id="leaderMeta"></div>
    </div>

    <!-- Prize Popup -->
    <div id="prize" class="prize">
        <img id="prizeImg" alt="Lot" />
        <div class="txt" id="prizeTxt"></div>
    </div>

    <!-- Scripts (order matters) -->
    <script src="js/config.js"></script>
    <script src="js/security.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/particles.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/resize.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
    <script src="js/main.js"></script>
</body>

</html>